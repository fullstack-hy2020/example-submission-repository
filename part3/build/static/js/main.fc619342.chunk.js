(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),s=t(3),u=t(1),o=t(4),a=t.n(o),i="/api/persons",j=function(){return a.a.get(i).then((function(e){return e.data}))},d=function(e){return a.a.post(i,e).then((function(e){return e.data}))},l=function(e,n){return a.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return a.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},b=t(0),h=function(e){var n=e.person,t=e.handleDeleteFunc;return Object(b.jsxs)("div",{children:[n.name," ",n.number," ",Object(b.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},O=function(e){var n=e.persons,t=e.searchQuery,r=e.setPersons,c=e.setErrorMessage,s=function(e){window.confirm("delete ".concat(e.name," ?"))&&(f(e.id).catch((function(n){return c("Information of ".concat(e.name," has already been removed from server"))})),r(n.filter((function(n){return n.id!==e.id}))))};return Object(b.jsx)("div",{children:n.filter((function(e){return!t||e.name.includes(t)||e.number.includes(t)})).map((function(e){return Object(b.jsx)(h,{person:e,handleDeleteFunc:s},e.name)}))})},m=function(e){var n=e.persons,t=e.setPersons,r=e.setInfoMessage,c=e.setErrorMessage,o=Object(u.useState)(""),a=Object(s.a)(o,2),i=a[0],j=a[1],f=Object(u.useState)(""),h=Object(s.a)(f,2),O=h[0],m=h[1];return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s=n.find((function(e){return e.name===i}));if(s){if(window.confirm("".concat(i," already exists. Do you want to update the phone number?"))){var u={name:i,number:O};l(s.id,u).then((function(e){return t(n.map((function(n){return n.id===e.id?e:n})))})),r("Updated phone number of ".concat(i)),setTimeout((function(){r(null)}),5e3)}}else d({name:i,number:O}).then((function(e){t(n.concat(e)),r("Added ".concat(i)),setTimeout((function(){r(null)}),5e3)})).catch((function(e){console.log(e.response),c("".concat(e.response.data.error)),setTimeout((function(){c(null)}),5e3)}))},children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:i,onChange:function(e){j(e.target.value)}})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:O,onChange:function(e){m(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.searchQuery,t=e.setSearchQuery;return Object(b.jsxs)("div",{children:["filter shown with",Object(b.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]})},v=(t(38),function(){var e=Object(u.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],c=Object(u.useState)(null),o=Object(s.a)(c,2),a=o[0],i=o[1],d=Object(u.useState)(null),l=Object(s.a)(d,2),f=l[0],h=l[1],v=function(e){var n=e.infoMessage;return null===n?null:Object(b.jsx)("div",{className:"info",children:n})},x=function(e){var n=e.errorMessage;return null===n?null:Object(b.jsx)("div",{className:"error",children:n})};Object(u.useEffect)((function(){j().then((function(e){return r(e)}))}),[]);var g=Object(u.useState)(""),y=Object(s.a)(g,2),w=y[0],M=y[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)(v,{infoMessage:a}),Object(b.jsx)(x,{errorMessage:f}),Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(p,{query:w,setSearchQuery:M}),Object(b.jsx)("h3",{children:"Add a new"}),Object(b.jsx)(m,{persons:t,setPersons:r,setInfoMessage:i,setErrorMessage:h}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(O,{persons:t,searchQuery:w,setPersons:r,setErrorMessage:h})]})});c.a.render(Object(b.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fc619342.chunk.js.map