(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),u=t(3),s=t(1),a=t(4),o=t.n(a),i="/api/persons",j=function(){return o.a.get(i).then((function(e){return e.data}))},d=function(e){return o.a.post(i,e).then((function(e){return e.data}))},l=function(e,n){return o.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return o.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},b=t(0),h=function(e){var n=e.person,t=e.handleDeleteFunc;return Object(b.jsxs)("div",{children:[n.name," ",n.number," ",Object(b.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},O=function(e){var n=e.persons,t=e.searchQuery,r=e.setPersons,c=e.setErrorMessage,u=function(e){window.confirm("delete ".concat(e.name," ?"))&&(f(e.id).catch((function(n){return c("Information of ".concat(e.name," has already been removed from server"))})),r(n.filter((function(n){return n.id!==e.id}))))};return Object(b.jsx)("div",{children:n.filter((function(e){return!t||e.name.includes(t)||e.number.includes(t)})).map((function(e){return Object(b.jsx)(h,{person:e,handleDeleteFunc:u},e.name)}))})},m=function(e){var n=e.persons,t=e.setPersons,r=e.setInfoMessage,c=Object(s.useState)(""),a=Object(u.a)(c,2),o=a[0],i=a[1],j=Object(s.useState)(""),f=Object(u.a)(j,2),h=f[0],O=f[1];return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.find((function(e){return e.name===o}));if(c){if(window.confirm("".concat(o," already exists. Do you want to update the phone number?"))){var u={name:o,number:h};l(c.id,u).then((function(e){return t(n.map((function(n){return n.id===e.id?e:n})))})),r("Updated phone number of ".concat(o)),setTimeout((function(){r(null)}),5e3)}}else d({name:o,number:h}).then((function(e){return t(n.concat(e))})),r("Added ".concat(o)),setTimeout((function(){r(null)}),5e3)},children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:o,onChange:function(e){i(e.target.value)}})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:h,onChange:function(e){O(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.searchQuery,t=e.setSearchQuery;return Object(b.jsxs)("div",{children:["filter shown with",Object(b.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]})},p=(t(38),function(){var e=Object(s.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],c=Object(s.useState)(null),a=Object(u.a)(c,2),o=a[0],i=a[1],d=Object(s.useState)(null),l=Object(u.a)(d,2),f=l[0],h=l[1],p=function(e){var n=e.infoMessage;return null===n?null:Object(b.jsx)("div",{className:"info",children:n})},x=function(e){var n=e.errorMessage;return null===n?null:Object(b.jsx)("div",{className:"error",children:n})};Object(s.useEffect)((function(){j().then((function(e){return r(e)}))}),[]);var g=Object(s.useState)(""),y=Object(u.a)(g,2),w=y[0],S=y[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)(p,{infoMessage:o}),Object(b.jsx)(x,{errorMessage:f}),Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(v,{query:w,setSearchQuery:S}),Object(b.jsx)("h3",{children:"Add a new"}),Object(b.jsx)(m,{persons:t,setPersons:r,setInfoMessage:i}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(O,{persons:t,searchQuery:w,setPersons:r,setErrorMessage:h})]})});c.a.render(Object(b.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.df24b0fd.chunk.js.map